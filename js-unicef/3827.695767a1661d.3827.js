"use strict";(self.funElementsApi=self.funElementsApi||[]).push([[3827],{23827:(e,t,i)=>{i.d(t,{H:()=>A});var s=i(99010);function n(e,t){if(!e)return;if("test"===t&&e.FUN_SPLIT_TESTING_NAME)return{name:e.FUN_SPLIT_TESTING_NAME,node:e};if("variant"===t&&e.FUN_SPLIT_TESTING_VARIANT_NAME)return{name:e.FUN_SPLIT_TESTING_VARIANT_NAME,node:e};const i=(0,s.um)(e,`fun-${t}`);if(i)return{name:i,node:e};const n=e.getAttribute("href")||"",r=/#FUN/.test(n),a=/#X/.test(n);if(r||a){const i=(0,s.Lb)(n);if(i&&i.key&&i[t])return{name:i[t],node:e}}}var r=i(81931),a=i(12548),o=i(12952),l=i(24984);class h extends l.f{get eventType(){return o.xk}}class c extends l.f{get eventType(){return o.b8}}class m extends l.f{get eventType(){return o.uq}}class d extends l.f{constructor(e){super(e),this.payload.eventComment=Object.assign(Object.assign({},this.payload.eventComment),{elementFoundTimestamp:e.elementFoundTimestamp})}get eventType(){return o.jb}}class u extends l.f{get eventType(){return o.GU}}var g=i(10482),T=i(2780),p=i(87030),y=i(91926),w=i(73613),f=i(57518);class v{constructor(e){this._visible=!1,this._resolver=null,this.elementSeen=new Promise((e=>this._resolver=e)),this.el=e.el,this.window=window,this.widgetKey=e.widgetKey,this.elementKey=e.elementKey,this.elementLocale=e.elementLocale,this.elementType=e.elementType,this.tracker=e.tracker,this.splitTestName=e.splitTestName,this.splitTestVariant=e.splitTestVariant,this.elementFoundTimestamp=e.elementFoundTimestamp,this.showcase=e.showcase,e.eventComment&&(this.eventComment=e.eventComment),e.elementData&&(this.elementData=e.elementData),this.setupViewportTracker()}get visible(){return this._visible}set visible(e){this.window.clearTimeout(this.visibleTimeout),this.visible!==e&&(e?this.visibleTimeout=this.window.setTimeout((()=>{this._visible=e,this.showcase||(this.tracker.track(new d(this)),this.splitTestName&&this.splitTestVariant&&this.tracker.track(new u(this)))}),100):this._visible=e)}checkVisibility(){const e=this.isIntersecting()&&this.isVisible();return this.visible=e,e&&this._resolver(),e}checkVisibilityWithInterval(){this.window.clearInterval(this.checkInterval),this.checkVisibility()||(this.checkInterval=this.window.setInterval((()=>{this.checkVisibility()&&this.window.clearInterval(this.checkInterval)}),v.VISIBILITY_CHECK_INTERVAL_MS))}setupViewportTracker(){const e=()=>{this.checkVisibility()};this.window.addEventListener("scroll",(0,w.P)(e,50),{passive:!0}),this.window.addEventListener("resize",(0,w.P)(e,50),{passive:!0}),this.window.addEventListener("load",e),this.checkVisibilityWithInterval()}isIntersecting(){let e;try{e=this.el.getBoundingClientRect()}catch(e){if(e&&e.message&&e.message.toLowerCase().includes("unspecified error"))return!1;throw e}const t=.25*e.height,i=.25*e.width;return!(0===e.top&&0===e.left&&0===e.right&&0===e.bottom)&&e.top>=-t&&e.left>=-i&&e.bottom<=(this.window.innerHeight||this.window.document.documentElement.clientHeight)+t&&e.right<=(this.window.innerWidth||this.window.document.documentElement.clientWidth)+i}isVisible(){if(this.elementType===f.Yq.STICKY_BUTTON)return!0;const e=this.el,t=e.getBoundingClientRect(),i=getComputedStyle(e);if("none"===i.display)return!1;if("visible"!==i.visibility)return!1;if(parseFloat(i.opacity)<.1)return!1;if(e.offsetWidth+e.offsetHeight+t.height+t.width===0)return!1;const s={x:t.left+e.offsetWidth/2,y:t.top+e.offsetHeight/2};let n=document.elementFromPoint(s.x,s.y);do{if(!n)return!0;if(n.__funIgnoreInViewportTracker)return!0;if(n===e)return!0;n=n.parentNode}while(n);return!1}}v.VISIBILITY_CHECK_INTERVAL_MS=50;const k=v;var E=i(45507),b=i(65594),N=i(7255),I=i(77706),L=i(33705),C=i(52445);class _{constructor(e,t){this.locale=e,this.labelsProvider=t}static getDurationBetween(e,t){return(e.getTime()-t.getTime())/36e5}format(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{endDate:void 0,showYesterday:!0,isRecurring:!1,justNow:!1};const{endDate:i,isRecurring:s=!1,showYesterday:n=!0,justNow:r=!1}=t,a=new Date(e);if(s)return a.toLocaleString(this.locale,{month:"short",year:"numeric",numberingSystem:"latn"});const o=i||new Date,l=new Date(o.getTime());l.setHours(0),l.setMinutes(0),l.setMilliseconds(0);const h=new Date(l.getTime());h.setDate(h.getDate()-1);const c=_.getDurationBetween(o,a);if(c<1){const e=Math.round(60*c);return r&&0===e?this.labelsProvider.justNowText():this.labelsProvider.minutesAgoText({minutes:e})}if(c<12){const e=Math.round(c);return this.labelsProvider.hoursAgoText({hours:e})}const m=a.toLocaleTimeString(this.locale,{hour:"2-digit",minute:"2-digit"});return l<a?this.labelsProvider.todayText({time:m}):n&&h<a?this.labelsProvider.yesterdayText({time:m}):a.toLocaleString(this.locale,{month:"short",day:"2-digit",year:"numeric",numberingSystem:"latn"})}}class V{constructor(e){this.intl=e}hoursAgoText(e){let{hours:t}=e;return this.intl.translate("common.elementsDonationsListDateFormatter.hoursAgoText",{hours:t})}minutesAgoText(e){let{minutes:t}=e;return this.intl.translate("common.elementsDonationsListDateFormatter.minutesAgoText",{minutes:t})}todayText(e){let{time:t}=e;return this.intl.translate("common.elementsDonationsListDateFormatter.todayText",{time:t})}yesterdayText(e){let{time:t}=e;return this.intl.translate("common.elementsDonationsListDateFormatter.yesterdayText",{time:t})}justNowText(){return this.intl.translate("common.elementsDonationsListDateFormatter.justNow")}}class D extends C.C{format(e,t){return this.donationListDateFormatterInstance||(this.donationListDateFormatterInstance=new _(this.locale,new V(this.intl))),this.donationListDateFormatterInstance.format(e,t)}}var S=i(32999);class F extends S.i{loadFile(){return Promise.reject("Loading of statically bundled locale file is forbidden")}}class A{constructor(e){var t;this.splitTestName="",this.splitTestVariant="",this.widgetKey="",this.showcase=!1,this.viewportTracker=null,this.trackerTags=[],this.styles=e.styles,this.node=e.node,this.elementKey=e.elementKey,this.config=e.config,this.data=e.data,this.showcase=!!e.showcase,this.elementType=e.elementType,this.elementName=e.elementName,this.meta=e.meta,this.tracker=e.tracker,this.guessedCurrencyService=e.guessedCurrencyService,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.userSession=e.userSession,this.env=e.env,this.isDevelopmentMode=e.isDevelopmentMode,this.countryCode=e.countryCode,this.companyKey=e.companyKey,this.widgetKey=(t=this.config)&&"object"==typeof t&&"string"==typeof t.openWidget?this.config.openWidget:"",this.localeConfig=e.localeConfig,this.elementLocale=e.localeCode||y.c0.EN_US,this.elementLang=e.languageCode||y.uZ.EN,this.isRTL=e.isRTL,this._isMobile=e.isMobile,this._isAndroid=e.isAndroid,this._isMobileView=e.isMobileView,this.window=e.window,this.globalElementsRepository=e.globalElementsRepository,this.formOpener=e.formOpener,this.loadedTimestamp=e.loadedTimestamp,this.userInteraction=e.userInteraction,this.embedElementsService=e.embedElementsService,this.company=e.company,this.elementFoundTimestamp=e.elementFoundTimestamp,this.intl=function(e,t){const i=(0,E.AM)(e,y.dI)?e:b.R.DEFAULT_LOCALE;return(0,N.D)({dateFormatter:new D(i),currencyFormatter:t,numberFormatter:new I.h(i),availableLocales:y.dI,translationLoader:new F,locale:i,phrases:L.I[i]})}(this.elementLocale,e.currencyFormatter),this.currencyService.loadFiat(this.intl),this.elementTitle=p.w[this.elementType],this.elementTitleLocalized=this.getElementTitle(),this.deviceType=e.deviceType,this.queryParams=e.queryParams,this.experimentsConfig=e.experimentsConfig,this.experiments=e.experiments,this.staticUrl=e.staticUrl,this.initExperiments(),this.setTestingVariables(),this.markNodeAsOurElement()}getElementTitle(){const e=p.w[this.elementType];if((0,T.tN)(this.elementType)){const t=this.intl.translate(function(e){return`iframeTitle.${e}`}(this.elementType));return t||e}return e||this.elementType}updateData(e){this.data=Object.assign({},this.data,e)}updateConfig(e){this.config=Object.assign({},this.config,e)}getConfig(){return Object.assign({},this.config)}getData(){return Object.assign({},this.data)}getElementTrackingEventComment(){return null}getElementTrackingData(){return null}get isMobile(){return this._isMobile||this.deviceType===g.DE.MOBILE}get isAndroid(){return this._isAndroid}get isMobileView(){return this.showcase?this.deviceType===g.DE.MOBILE:this._isMobileView}setTestingVariables(){const e=function(e){if(!function(e){if(!e)return!1;const t=(0,s.FX)(e,(e=>Boolean(e.FUN_SPLIT_TESTING)));return Boolean(t)}(e))return;const t=function(e){const t=(0,s.FX)(e,(e=>Boolean(e.FUN_SPLIT_TESTING_NAME||(0,s.um)(e,"fun-test"))));return n(e,"test")||n(t,"test")}(e),i=function(e){const t=(0,s.FX)(e,(e=>Boolean(e.FUN_SPLIT_TESTING_VARIANT_NAME||(0,s.um)(e,"fun-variant"))));return n(e,"variant")||n(t,"variant")}(e);return t&&i?{test:t.name,variant:i.name}:void 0}(this.node);e&&(this.splitTestName=e.test,this.splitTestVariant=e.variant)}initExperiments(){}markNodeAsOurElement(){this.node.__funElement=!0}trackElementClick(){this.taggedTrack((()=>this.tracker.track(new a.q(this))))}trackElementClose(){this.taggedTrack((()=>this.tracker.track(new c(this))))}trackElementClickClose(){this.taggedTrack((()=>this.tracker.track(new h(this))))}trackElementView(){this.taggedTrack((()=>this.tracker.track(new d(this))))}trackElementOpenElementModal(){this.taggedTrack((()=>this.tracker.track(new m(this))))}trackTestVariantView(){this.taggedTrack((()=>this.tracker.track(new u(this))))}handleElementView(){this.trackElementView(),this.splitTestName&&this.splitTestVariant&&this.trackTestVariantView()}initViewPortTracker(e){const t={el:e,window:this.window,widgetKey:this.widgetKey,elementKey:this.elementKey,elementType:this.elementType,elementLocale:this.elementLocale,tracker:this.tracker,splitTestName:this.splitTestName,splitTestVariant:this.splitTestVariant,elementFoundTimestamp:this.elementFoundTimestamp,showcase:this.showcase},i=this.getElementTrackingData();i&&(t.elementData=i);const s=this.getElementTrackingEventComment();s&&(t.eventComment=s),this.viewportTracker=new k(t)}taggedTrack(e){this.trackerTags&&this.tracker.setEventTags(this.trackerTags),e(),this.trackerTags&&this.tracker.removeEventTags(this.trackerTags)}refreshData(){throw new Error("Method not implemented")}getConfigLocalization(){if(!(0,T.T6)(this.config))throw new Error("Element is not translatable");return r.s.getByLanguage(this.config.localization,this.elementLang)}getApi(e){return this.globalElementsRepository.getApi(e)}}},12952:(e,t,i)=>{i.d(t,{jb:()=>s,tF:()=>n,uF:()=>r,xk:()=>a,b8:()=>o,uq:()=>l,rh:()=>h,A4:()=>c,HK:()=>m,GU:()=>d});const s="elementView",n="elementClick",r="elementOpenCheckout",a="elementClickClose",o="elementClose",l="elementOpenElementModal",h="elementModalView",c="fundraisingPageCreated",m="newMemberJoinedToFundraisingPage",d="testVariantView"},33359:(e,t,i)=>{i.d(t,{r:()=>s});class s{constructor(){this.payload={}}merge(e){const t={};for(const i in e)t[i]=e[i];for(const e in this.payload)t[e]=this.payload[e];this.payload=t}validate(){return!(!this.payload.companyKey||8!==this.payload.companyKey.length||!this.payload.clientId||!this.eventType)}toObject(){const e={};for(const t in this.payload)e[t]=this.payload[t];return this.payload.eventComment&&(e.eventComment=JSON.stringify(this.payload.eventComment)),e.eventType=this.eventType,e}}},24984:(e,t,i)=>{i.d(t,{f:()=>n});var s=i(33359);class n extends s.r{constructor(e){if(super(),this.payload={widgetKey:e.widgetKey,elementKey:e.elementKey,elementType:e.elementType,elementLocale:e.elementLocale,elementReminderKey:e.elementReminderKey,splitTestName:e.splitTestName,splitTestVariant:e.splitTestVariant,fundraisingPageKey:e.fundraisingPageKey,fundraisingPageCustomerKey:e.fundraisingPageCustomerKey,eventComment:e.eventComment},e.getElementTrackingData){const t=e.getElementTrackingData();t&&(this.payload.elementData=JSON.stringify(t))}else e.elementData&&(this.payload.elementData=JSON.stringify(e.elementData))}}},12548:(e,t,i)=>{i.d(t,{q:()=>r});var s=i(12952),n=i(24984);class r extends n.f{get eventType(){return s.tF}}}}]);